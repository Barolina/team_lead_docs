---
description: Синхронизация данных между СУБД и поисковой  системой.
---

# Streaming data to  ElasticSearch/Opensearch

### Что есть&#x20;

* мультитенатное  хранилище данных,  каждый тенат  - это отделная  БД в  кластере Postgres
* кол-во данных  в одном тенате  100Т/g

### НФТ

* изолированность   кодовой  бд по синхронизации &#x20;
* 1-2сек - доступность  задержки данных  между  подсистемами&#x20;
* масштабируемость&#x20;
* изоляция  от  бизнес-логики&#x20;

### Что хочется&#x20;

использовать  потоковую  передача данных, в режиме реального времени

#### Вариант 1 ( PGYSNC)

Умеет  подписывать,  на  события   в журнале.

Opensourse&#x20;

Подписываемся, только на те данные, которые нужны,   по шаблону  pgsync&#x20;

Должны быть  включена  логическая  репликация&#x20;

Плюсы:&#x20;

* низкая  задержка  синхронизации&#x20;

Минисы:&#x20;

* нет преобразования в процессе&#x20;
* требует  нагрузочное  тестирование  (  тестирование на  10 инстанса \*  30el/s  )&#x20;

#### Вариант 2 (  Logstash)&#x20;

минусы:&#x20;

* доработка  моделей,  на добавление  временной метки&#x20;
* latanсy  - дополнительное  преобразование в  формат logstash&#x20;

Решение:&#x20;

* pgsync



####
